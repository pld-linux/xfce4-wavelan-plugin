diff -ur xfce4-wavelan-plugin-0.5.6-orig/configure.ac xfce4-wavelan-plugin-0.5.6/configure.ac
--- xfce4-wavelan-plugin-0.5.6-orig/configure.ac	2010-12-04 01:51:47.000000000 +0100
+++ xfce4-wavelan-plugin-0.5.6/configure.ac	2011-03-01 13:50:20.026063514 +0100
@@ -48,7 +48,7 @@
 dnl configure the panel plugin
 XDT_CHECK_PACKAGE([LIBXFCE4UTIL], [libxfce4util-1.0], [4.3.20])
 XDT_CHECK_PACKAGE([LIBXFCE4PANEL], [libxfce4panel-1.0], [4.3.20])
-XDT_CHECK_PACKAGE([LIBXFCEGUI4], [libxfcegui4-1.0], [4.3.20])
+XDT_CHECK_PACKAGE([LIBXFCE4UI], [libxfce4ui-1], [4.8.0])
 XDT_CHECK_PACKAGE([GTK], [gtk+-2.0], [2.6.0])
 
 dnl Check for debugging support
diff -ur xfce4-wavelan-plugin-0.5.6-orig/panel-plugin/Makefile.am xfce4-wavelan-plugin-0.5.6/panel-plugin/Makefile.am
--- xfce4-wavelan-plugin-0.5.6-orig/panel-plugin/Makefile.am	2010-11-15 04:27:18.000000000 +0100
+++ xfce4-wavelan-plugin-0.5.6/panel-plugin/Makefile.am	2011-03-01 13:50:20.026063514 +0100
@@ -10,7 +10,7 @@
 
 xfce4_wavelan_plugin_LDADD =							\
 				@LIBXFCE4PANEL_LIBS@				\
-				@LIBXFCEGUI4_LIBS@
+				@LIBXFCE4UI_LIBS@
 
 xfce4_wavelan_plugin_SOURCES =							\
 	wavelan.c							\
@@ -21,7 +21,7 @@
 
 xfce4_wavelan_plugin_CFLAGS =							\
 	@LIBXFCE4PANEL_CFLAGS@							\
-	@LIBXFCEGUI4_CFLAGS@
+	@LIBXFCE4UI_CFLAGS@
 
 # .desktop file
 #
diff -ur xfce4-wavelan-plugin-0.5.6-orig/panel-plugin/wavelan.c xfce4-wavelan-plugin-0.5.6/panel-plugin/wavelan.c
--- xfce4-wavelan-plugin-0.5.6-orig/panel-plugin/wavelan.c	2010-11-15 04:27:18.000000000 +0100
+++ xfce4-wavelan-plugin-0.5.6/panel-plugin/wavelan.c	2011-03-01 18:28:59.508602404 +0100
@@ -31,10 +31,8 @@
 #include <gtk/gtk.h>
 
 #include <libxfce4util/libxfce4util.h>
-#include <libxfce4panel/xfce-panel-convenience.h>
-#include <libxfcegui4/libxfcegui4.h>
-#include <libxfce4panel/xfce-panel-plugin.h>
-#include <libxfce4panel/xfce-hvbox.h>
+#include <libxfce4panel/libxfce4panel.h>
+#include <libxfce4ui/libxfce4ui.h>
 
 #include "wi.h"
 
@@ -485,13 +483,13 @@
 wavelan_create_options (XfcePanelPlugin *plugin, t_wavelan *wavelan)
 {
   GtkWidget *dlg, *hbox, *label, *interface, *vbox, *autohide;
-  GtkWidget *autohide_missing, *header, *warn_label, *signal_colors;
+  GtkWidget *autohide_missing, *warn_label, *signal_colors;
   GtkWidget *combo;
   GList     *interfaces, *lp;
 
   TRACE ("Entered wavelan_create_options");
   
-  dlg = gtk_dialog_new_with_buttons (_("Properties"),
+  dlg = xfce_titled_dialog_new_with_buttons (_("Properties"),
               GTK_WINDOW (gtk_widget_get_toplevel (GTK_WIDGET (plugin))),
               GTK_DIALOG_DESTROY_WITH_PARENT | 
               GTK_DIALOG_NO_SEPARATOR,
@@ -507,12 +505,7 @@
   
   gtk_container_set_border_width (GTK_CONTAINER (dlg), 2);
 
-  header = xfce_create_header (NULL, _("Wavelan Plugin Options"));
-  gtk_widget_set_size_request (GTK_BIN (header)->child, 200, 32);
-  gtk_container_set_border_width (GTK_CONTAINER (header), 6);
-  gtk_widget_show (header);
-  gtk_box_pack_start (GTK_BOX (GTK_DIALOG (dlg)->vbox), header,
-                      FALSE, TRUE, 0);
+  xfce_titled_dialog_set_subtitle (XFCE_TITLED_DIALOG(dlg),  _("Wavelan Plugin Options"));
               
   vbox = gtk_vbox_new(FALSE, 8);
   gtk_container_set_border_width (GTK_CONTAINER (vbox), 6);
